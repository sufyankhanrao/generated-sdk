
"""
complexheaderparametersapi

This file was automatically generated by APIMATIC v3.0 (
 https://www.apimatic.io ).
"""

# ruff: noqa: PLR0915, W291
from complexheaderparametersapi.api_helper import (
    APIHelper,
)
from complexheaderparametersapi.models.paypal_mock_response_schema import (
    PaypalMockResponseSchema,
)
from complexheaderparametersapi.models.vehicle import (
    Vehicle,
)
from complexheaderparametersapi.utilities.union_type_lookup import (
    UnionTypeLookUp,
)
from tests.controllers.controller_test_base import (
    ControllerTestBase,
)


class APIControllerTests(ControllerTestBase):
    """
    Endpoint tests for validating the API behavior.

    Ensures controller methods execute correctly and produce the expected
    responses using the shared test client and response catcher.
    """

    controller = None

    @classmethod
    def setUpClass(cls):
        """
        Initialize the shared test client and controller for all test methods.
        """
        super().setUpClass()
        cls.controller = cls.client.client
        cls.response_catcher = cls.controller.http_call_back

    def test_submit_order_with_pay_pal_mock_response(self):
        """
        Test the CreateOrder endpoint with PayPal-Mock-Response header value.
        """
        # Parameters for the API call
        pay_pal_mock_response = APIHelper.json_deserialize(
            "{\"mock_application_codes\":\"DUPLICATE_INVOICE_ID\"}",
            PaypalMockResponseSchema.from_dictionary,
        )

        # Perform the API call through the SDK function
        self.controller.retrieve_checkout_order(
            pay_pal_mock_response,
        )
        # Test response code
        assert self.response_catcher.response.status_code == 200

    def test_submit_vehicle(self):
        """
        Accepts a single vehicle object in the header.
        """
        # Parameters for the API call
        vehicle_header = APIHelper.json_deserialize(
            "{\"make\":\"Toyota\",\"model\":\"Camry\",\"year\":2022,\"engine\":{\"hor"
            "sepower\":3000,\"fuelType\":\"Petrol\"}}",
            Vehicle.from_dictionary,
        )

        # Perform the API call through the SDK function
        self.controller.submit_vehicle_information(
            vehicle_header,
        )
        # Test response code
        assert self.response_catcher.response.status_code == 200

    def test_submit_one_of_vehicles_as_bike(self):
        """
        Accepts a Car or a Bike object in the header.
        """
        # Parameters for the API call
        one_of_vehicle = APIHelper.deserialize_union_type(
            UnionTypeLookUp.get("OneOfVehicle"),
            "{\"make\":\"Yamaha\",\"model\":\"VMax\",\"year\":2020,\"engineCapacity\""
            ":1800}",
        )

        # Perform the API call through the SDK function
        self.controller.submit_a_one_of_vehicle(
            one_of_vehicle,
        )
        # Test response code
        assert self.response_catcher.response.status_code == 200

    def test_submit_one_of_vehicles_as_car(self):
        """
        Accepts a Car or a Bike object in the header.
        """
        # Parameters for the API call
        one_of_vehicle = APIHelper.deserialize_union_type(
            UnionTypeLookUp.get("OneOfVehicle"),
            "{\"make\":\"Toyota\",\"model\":\"Yaris\",\"doors\":2,\"engine\":{\"horse"
            "power\":1500,\"fuelType\":\"Petrol\"}}",
        )

        # Perform the API call through the SDK function
        self.controller.submit_a_one_of_vehicle(
            one_of_vehicle,
        )
        # Test response code
        assert self.response_catcher.response.status_code == 200

    def test_submit_map_of_vehicles(self):
        """
        Accepts a map of vehicle objects in the header.
        """
        # Parameters for the API call
        map_of_vehicles = APIHelper.json_deserialize(
            "{\"Toyota Camry\":{\"make\":\"Toyota\",\"model\":\"Camry\",\"year\":2022"
            ",\"engine\":{\"horsepower\":3000,\"fuelType\":\"Petrol\"}},\"Toyota Yari"
            "s\":{\"make\":\"Toyota\",\"model\":\"Yaris\",\"year\":2020,\"engine\":{"
            "\"horsepower\":1300,\"fuelType\":\"Petrol\"}}}",
            Vehicle.from_dictionary,
            as_dict=True,
        )

        # Perform the API call through the SDK function
        self.controller.submit_a_map_of_vehicles(
            map_of_vehicles,
        )
        # Test response code
        assert self.response_catcher.response.status_code == 200

    def test_submit_array_of_vehicles(self):
        """
        Accepts an array of vehicles in the request body.
        """
        # Parameters for the API call
        array_of_vehicles = APIHelper.json_deserialize(
            "[{\"make\":\"Toyota\",\"model\":\"Camry\",\"year\":2022,\"engine\":{\"ho"
            "rsepower\":3000,\"fuelType\":\"Petrol\"}},{\"make\":\"Toyota\",\"model\""
            ":\"Yaris\",\"year\":2020,\"engine\":{\"horsepower\":1300,\"fuelType\":\""
            "Petrol\"}}]",
            Vehicle.from_dictionary,
        )

        # Perform the API call through the SDK function
        self.controller.submit_an_array_of_vehicles(
            array_of_vehicles,
        )
        # Test response code
        assert self.response_catcher.response.status_code == 200

