
"""
paginationtester

This file was automatically generated by APIMATIC v3.0 (
 https://www.apimatic.io ).
"""

# ruff: noqa: PLR0915, W291
from apimatic_core.utilities.comparison_helper import (
    ComparisonHelper,
)

from paginationtester.api_helper import APIHelper
from tests.controllers.controller_test_base import (
    ControllerTestBase,
)


class TransactionControllerTests(ControllerTestBase):
    """
    Endpoint tests for validating the API behavior.

    Ensures controller methods execute correctly and produce the expected
    responses using the shared test client and response catcher.
    """

    controller = None

    @classmethod
    def setUpClass(cls):
        """
        Initialize the shared test client and controller for all test methods.
        """
        super().setUpClass()
        cls.controller = cls.client.transaction
        cls.response_catcher = cls.controller.http_call_back

    def test_offset_based_pagination(self):
        """
        Fetch transactions using Offset-based Pagination.
        """
        # Parameters for the API call
        offset = 0
        limit = 10
        success_on_empty_page = True

        # Perform the API call through the SDK function
        result = self.controller.fetch_with_offset(
            offset,
            limit,
            success_on_empty_page,
        )
        _paginated_data = None
        try:
            for _page in result.pages():
                _paginated_data = _page
        except:
            pass

        # Test response code
        assert self.response_catcher.response.status_code == 200
        # Test whether the captured response is as we expected
        assert _paginated_data is not None
        expected_body = APIHelper.json_deserialize(
            "{\"data\":[{\"id\":\"txn_51\",\"amount\":275.80,\"timestamp\":\"Tue, 11 "
            "Mar 2025 16:10:00 GMT\"},{\"id\":\"txn_52\",\"amount\":499.99,\"timestam"
            "p\":\"Tue, 11 Mar 2025 16:15:00 GMT\"},{\"id\":\"txn_53\",\"amount\":620"
            ".25,\"timestamp\":\"Tue, 11 Mar 2025 16:20:00 GMT\"},{\"id\":\"txn_54\","
            "\"amount\":350.60,\"timestamp\":\"Tue, 11 Mar 2025 16:25:00 GMT\"},{\"id"
            "\":\"txn_55\",\"amount\":450.75,\"timestamp\":\"Tue, 11 Mar 2025 16:30:0"
            "0 GMT\"},{\"id\":\"txn_56\",\"amount\":300.10,\"timestamp\":\"Tue, 11 Ma"
            "r 2025 16:35:00 GMT\"},{\"id\":\"txn_57\",\"amount\":520.55,\"timestamp"
            "\":\"Tue, 11 Mar 2025 16:40:00 GMT\"},{\"id\":\"txn_58\",\"amount\":180."
            "25,\"timestamp\":\"Tue, 11 Mar 2025 16:45:00 GMT\"},{\"id\":\"txn_59\","
            "\"amount\":490.90,\"timestamp\":\"Tue, 11 Mar 2025 16:50:00 GMT\"},{\"id"
            "\":\"txn_60\",\"amount\":310.40,\"timestamp\":\"Tue, 11 Mar 2025 16:55:0"
            "0 GMT\"}]}",
        )
        received_body = APIHelper.json_deserialize(
            APIHelper.json_serialize(_paginated_data.body),
        )
        assert ComparisonHelper.match_body(
            expected_body,
            received_body,
            check_values = True,
        )

    def test_offset_based_pagination_without_input(self):
        """
        Fetch transactions using Offset-based Pagination.
        """
        # Parameters for the API call
        offset = None
        limit = None
        success_on_empty_page = True

        # Perform the API call through the SDK function
        result = self.controller.fetch_with_offset(
            offset,
            limit,
            success_on_empty_page,
        )
        _paginated_data = None
        try:
            for _page in result.pages():
                _paginated_data = _page
        except:
            pass

        # Test response code
        assert self.response_catcher.response.status_code == 200
        # Test whether the captured response is as we expected
        assert _paginated_data is not None
        expected_body = APIHelper.json_deserialize(
            "{\"data\":[{\"id\":\"txn_51\",\"amount\":275.80,\"timestamp\":\"Tue, 11 "
            "Mar 2025 16:10:00 GMT\"},{\"id\":\"txn_52\",\"amount\":499.99,\"timestam"
            "p\":\"Tue, 11 Mar 2025 16:15:00 GMT\"},{\"id\":\"txn_53\",\"amount\":620"
            ".25,\"timestamp\":\"Tue, 11 Mar 2025 16:20:00 GMT\"},{\"id\":\"txn_54\","
            "\"amount\":350.60,\"timestamp\":\"Tue, 11 Mar 2025 16:25:00 GMT\"},{\"id"
            "\":\"txn_55\",\"amount\":450.75,\"timestamp\":\"Tue, 11 Mar 2025 16:30:0"
            "0 GMT\"},{\"id\":\"txn_56\",\"amount\":300.10,\"timestamp\":\"Tue, 11 Ma"
            "r 2025 16:35:00 GMT\"},{\"id\":\"txn_57\",\"amount\":520.55,\"timestamp"
            "\":\"Tue, 11 Mar 2025 16:40:00 GMT\"},{\"id\":\"txn_58\",\"amount\":180."
            "25,\"timestamp\":\"Tue, 11 Mar 2025 16:45:00 GMT\"},{\"id\":\"txn_59\","
            "\"amount\":490.90,\"timestamp\":\"Tue, 11 Mar 2025 16:50:00 GMT\"},{\"id"
            "\":\"txn_60\",\"amount\":310.40,\"timestamp\":\"Tue, 11 Mar 2025 16:55:0"
            "0 GMT\"}]}",
        )
        received_body = APIHelper.json_deserialize(
            APIHelper.json_serialize(_paginated_data.body),
        )
        assert ComparisonHelper.match_body(
            expected_body,
            received_body,
            check_values = True,
        )

    def test_cursor_based_pagination(self):
        """
        Fetch transactions using Cursor-based Pagination.
        """
        # Parameters for the API call
        cursor = "txn_abc123"
        limit = 10
        success_on_empty_page = True

        # Perform the API call through the SDK function
        result = self.controller.fetch_with_cursor(
            cursor,
            limit,
            success_on_empty_page,
        )
        _paginated_data = None
        try:
            for _page in result.pages():
                _paginated_data = _page
        except:
            pass

        # Test response code
        assert self.response_catcher.response.status_code == 200
        # Test whether the captured response is as we expected
        assert _paginated_data is not None
        expected_body = APIHelper.json_deserialize(
            "{\"data\":[{\"id\":\"txn_51\",\"amount\":275.80,\"timestamp\":\"Tue, 11 "
            "Mar 2025 16:10:00 GMT\"},{\"id\":\"txn_52\",\"amount\":499.99,\"timestam"
            "p\":\"Tue, 11 Mar 2025 16:15:00 GMT\"},{\"id\":\"txn_53\",\"amount\":620"
            ".25,\"timestamp\":\"Tue, 11 Mar 2025 16:20:00 GMT\"},{\"id\":\"txn_54\","
            "\"amount\":350.60,\"timestamp\":\"Tue, 11 Mar 2025 16:25:00 GMT\"},{\"id"
            "\":\"txn_55\",\"amount\":450.75,\"timestamp\":\"Tue, 11 Mar 2025 16:30:0"
            "0 GMT\"},{\"id\":\"txn_56\",\"amount\":300.10,\"timestamp\":\"Tue, 11 Ma"
            "r 2025 16:35:00 GMT\"},{\"id\":\"txn_57\",\"amount\":520.55,\"timestamp"
            "\":\"Tue, 11 Mar 2025 16:40:00 GMT\"},{\"id\":\"txn_58\",\"amount\":180."
            "25,\"timestamp\":\"Tue, 11 Mar 2025 16:45:00 GMT\"},{\"id\":\"txn_59\","
            "\"amount\":490.90,\"timestamp\":\"Tue, 11 Mar 2025 16:50:00 GMT\"},{\"id"
            "\":\"txn_60\",\"amount\":310.40,\"timestamp\":\"Tue, 11 Mar 2025 16:55:0"
            "0 GMT\"}]}",
        )
        received_body = APIHelper.json_deserialize(
            APIHelper.json_serialize(_paginated_data.body),
        )
        assert ComparisonHelper.match_body(
            expected_body,
            received_body,
            check_values = True,
        )

    def test_link_based_pagination(self):
        """
        Fetch transactions using Link-based Pagination.
        """
        # Parameters for the API call
        page = 1
        size = 10
        success_on_empty_page = True

        # Perform the API call through the SDK function
        result = self.controller.fetch_with_link(
            page,
            size,
            success_on_empty_page,
        )
        _paginated_data = None
        try:
            for _page in result.pages():
                _paginated_data = _page
        except:
            pass

        # Test response code
        assert self.response_catcher.response.status_code == 200
        # Test whether the captured response is as we expected
        assert _paginated_data is not None
        expected_body = APIHelper.json_deserialize(
            "{\"data\":[{\"id\":\"txn_31\",\"amount\":350.20,\"timestamp\":\"Tue, 11 "
            "Mar 2025 14:30:00 GMT\"},{\"id\":\"txn_32\",\"amount\":520.00,\"timestam"
            "p\":\"Tue, 11 Mar 2025 14:35:00 GMT\"},{\"id\":\"txn_33\",\"amount\":140"
            ".15,\"timestamp\":\"Tue, 11 Mar 2025 14:40:00 GMT\"},{\"id\":\"txn_34\","
            "\"amount\":315.75,\"timestamp\":\"Tue, 11 Mar 2025 14:45:00 GMT\"},{\"id"
            "\":\"txn_35\",\"amount\":600.50,\"timestamp\":\"Tue, 11 Mar 2025 14:50:0"
            "0 GMT\"},{\"id\":\"txn_36\",\"amount\":245.25,\"timestamp\":\"Tue, 11 Ma"
            "r 2025 14:55:00 GMT\"},{\"id\":\"txn_37\",\"amount\":460.40,\"timestamp"
            "\":\"Tue, 11 Mar 2025 15:00:00 GMT\"},{\"id\":\"txn_38\",\"amount\":130."
            "99,\"timestamp\":\"Tue, 11 Mar 2025 15:05:00 GMT\"},{\"id\":\"txn_39\","
            "\"amount\":495.75,\"timestamp\":\"Tue, 11 Mar 2025 15:10:00 GMT\"},{\"id"
            "\":\"txn_40\",\"amount\":325.10,\"timestamp\":\"Tue, 11 Mar 2025 15:15:0"
            "0 GMT\"}]}",
        )
        received_body = APIHelper.json_deserialize(
            APIHelper.json_serialize(_paginated_data.body),
        )
        assert ComparisonHelper.match_body(
            expected_body,
            received_body,
            check_values = True,
        )

    def test_page_based_pagination(self):
        """
        Fetch transactions using Page-based Pagination.
        """
        # Parameters for the API call
        page = 1
        size = 10
        success_on_empty_page = True

        # Perform the API call through the SDK function
        result = self.controller.fetch_with_page(
            page,
            size,
            success_on_empty_page,
        )
        _paginated_data = None
        try:
            for _page in result.pages():
                _paginated_data = _page
        except:
            pass

        # Test response code
        assert self.response_catcher.response.status_code == 200
        # Test whether the captured response is as we expected
        assert _paginated_data is not None
        expected_body = APIHelper.json_deserialize(
            "{\"data\":[{\"id\":\"txn_51\",\"amount\":275.80,\"timestamp\":\"Tue, 11 "
            "Mar 2025 16:10:00 GMT\"},{\"id\":\"txn_52\",\"amount\":499.99,\"timestam"
            "p\":\"Tue, 11 Mar 2025 16:15:00 GMT\"},{\"id\":\"txn_53\",\"amount\":620"
            ".25,\"timestamp\":\"Tue, 11 Mar 2025 16:20:00 GMT\"},{\"id\":\"txn_54\","
            "\"amount\":350.60,\"timestamp\":\"Tue, 11 Mar 2025 16:25:00 GMT\"},{\"id"
            "\":\"txn_55\",\"amount\":450.75,\"timestamp\":\"Tue, 11 Mar 2025 16:30:0"
            "0 GMT\"},{\"id\":\"txn_56\",\"amount\":300.10,\"timestamp\":\"Tue, 11 Ma"
            "r 2025 16:35:00 GMT\"},{\"id\":\"txn_57\",\"amount\":520.55,\"timestamp"
            "\":\"Tue, 11 Mar 2025 16:40:00 GMT\"},{\"id\":\"txn_58\",\"amount\":180."
            "25,\"timestamp\":\"Tue, 11 Mar 2025 16:45:00 GMT\"},{\"id\":\"txn_59\","
            "\"amount\":490.90,\"timestamp\":\"Tue, 11 Mar 2025 16:50:00 GMT\"},{\"id"
            "\":\"txn_60\",\"amount\":310.40,\"timestamp\":\"Tue, 11 Mar 2025 16:55:0"
            "0 GMT\"}]}",
        )
        received_body = APIHelper.json_deserialize(
            APIHelper.json_serialize(_paginated_data.body),
        )
        assert ComparisonHelper.match_body(
            expected_body,
            received_body,
            check_values = True,
        )

    def test_page_based_pagination_without_input(self):
        """
        Fetch transactions using Page-based Pagination.
        """
        # Parameters for the API call
        page = None
        size = None
        success_on_empty_page = True

        # Perform the API call through the SDK function
        result = self.controller.fetch_with_page(
            page,
            size,
            success_on_empty_page,
        )
        _paginated_data = None
        try:
            for _page in result.pages():
                _paginated_data = _page
        except:
            pass

        # Test response code
        assert self.response_catcher.response.status_code == 200
        # Test whether the captured response is as we expected
        assert _paginated_data is not None
        expected_body = APIHelper.json_deserialize(
            "{\"data\":[{\"id\":\"txn_51\",\"amount\":275.80,\"timestamp\":\"Tue, 11 "
            "Mar 2025 16:10:00 GMT\"},{\"id\":\"txn_52\",\"amount\":499.99,\"timestam"
            "p\":\"Tue, 11 Mar 2025 16:15:00 GMT\"},{\"id\":\"txn_53\",\"amount\":620"
            ".25,\"timestamp\":\"Tue, 11 Mar 2025 16:20:00 GMT\"},{\"id\":\"txn_54\","
            "\"amount\":350.60,\"timestamp\":\"Tue, 11 Mar 2025 16:25:00 GMT\"},{\"id"
            "\":\"txn_55\",\"amount\":450.75,\"timestamp\":\"Tue, 11 Mar 2025 16:30:0"
            "0 GMT\"},{\"id\":\"txn_56\",\"amount\":300.10,\"timestamp\":\"Tue, 11 Ma"
            "r 2025 16:35:00 GMT\"},{\"id\":\"txn_57\",\"amount\":520.55,\"timestamp"
            "\":\"Tue, 11 Mar 2025 16:40:00 GMT\"},{\"id\":\"txn_58\",\"amount\":180."
            "25,\"timestamp\":\"Tue, 11 Mar 2025 16:45:00 GMT\"},{\"id\":\"txn_59\","
            "\"amount\":490.90,\"timestamp\":\"Tue, 11 Mar 2025 16:50:00 GMT\"},{\"id"
            "\":\"txn_60\",\"amount\":310.40,\"timestamp\":\"Tue, 11 Mar 2025 16:55:0"
            "0 GMT\"}]}",
        )
        received_body = APIHelper.json_deserialize(
            APIHelper.json_serialize(_paginated_data.body),
        )
        assert ComparisonHelper.match_body(
            expected_body,
            received_body,
            check_values = True,
        )

