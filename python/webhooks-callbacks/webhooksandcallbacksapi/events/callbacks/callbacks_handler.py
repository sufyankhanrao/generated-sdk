"""
 webhooksandcallbacksapi

 This file was automatically generated by APIMATIC v3.0 (
https://www.apimatic.io ).
"""

from __future__ import annotations

from typing import Union

from webhooksandcallbacksapi.api_helper import (
    APIHelper
)
from webhooksandcallbacksapi.events.unknown_event import (
    UnknownEvent
)
from webhooksandcallbacksapi.http.request import (
    Request
)
from webhooksandcallbacksapi.models.payment_callback import (
    PaymentCallback
)
from webhooksandcallbacksapi.utilities.union_type_lookup import (
    UnionTypeLookUp
)

CallbacksEventType = Union[PaymentCallback, UnknownEvent]

class CallbacksHandler:
    """
     Handles the Callbacks Events
    """

    @staticmethod
    def parse_event(request: Request) -> CallbacksEventType:
        """
         Parse the event.

        :return: PaymentCallback for successful parsing; UnknownEvent for
                 unknown events.
        :rtype: Union[PaymentCallback, UnknownEvent]
        """

        # Deserialize payload
        try:
            union = UnionTypeLookUp.get("Callbacks")
            return APIHelper.deserialize_union_type(union, request.raw_body)
        except Exception as e:
            return UnknownEvent(["Deserialization failed.", str(e)])
