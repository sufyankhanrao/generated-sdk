
"""
fortisapi

This file was automatically generated by APIMATIC v3.0 (
 https://www.apimatic.io ).
"""

# ruff: noqa: PLR0915, W291
from apimatic_core.utilities.comparison_helper import (
    ComparisonHelper,
)

from fortisapi.api_helper import APIHelper
from tests.controllers.controller_test_base import (
    ControllerTestBase,
)


class PaylinksControllerTests(ControllerTestBase):
    """
    Endpoint tests for validating the API behavior.

    Ensures controller methods execute correctly and produce the expected
    responses using the shared test client and response catcher.
    """

    controller = None

    @classmethod
    def setUpClass(cls):
        """
        Initialize the shared test client and controller for all test methods.
        """
        super().setUpClass()
        cls.controller = cls.client.paylinks
        cls.response_catcher = cls.controller.http_call_back

    def test_list_all_paylinks(self):
        """
        List all Paylinks.
        """
        # Parameters for the API call
        page = None
        order = None
        filter_by = None
        expand = None
        format = None
        typeahead = None
        fields = None

        # Perform the API call through the SDK function
        result = self.controller.list_all_paylinks(
            page,
            order,
            filter_by,
            expand,
            format,
            typeahead,
            fields,
        )
        # Test response code
        assert self.response_catcher.response.status_code == 200
        # Test headers
        expected_headers = {
            "content-type": "application/json",
        }

        assert ComparisonHelper.match_headers(
            expected_headers,
            self.response_catcher.response.headers,
        )
        # Test whether the captured response is as we expected
        assert result is not None
        expected_body = APIHelper.json_deserialize(
            "{\"type\":\"PaylinksCollection\",\"list\":[{\"location_id\":\"11e9"
            "5f8ec39de8fbdb0a4f1a\",\"cc_product_transaction_id\":\"11e95f8ec39"
            "de8fbdb0a4f1a\",\"email\":\"email@domain.com\",\"amount_due\":1,\""
            "contact_id\":\"11e95f8ec39de8fbdb0a4f1a\",\"ach_product_transactio"
            "n_id\":\"11e95f8ec39de8fbdb0a4f1a\",\"expire_date\":\"2021-12-01\""
            ",\"display_product_transaction_receipt_details\":true,\"display_bi"
            "lling_fields\":true,\"delivery_method\":0,\"cell_phone\":\"3339998"
            "822\",\"description\":\"Description\",\"store_token\":false,\"stor"
            "e_token_title\":\"John Account\",\"bank_funded_only_override\":fal"
            "se,\"tags\":[\"Tag 1\"],\"id\":\"11e95f8ec39de8fbdb0a4f1a\",\"stat"
            "us_id\":true,\"status_code\":1,\"active\":true,\"created_ts\":1422"
            "040992,\"modified_ts\":1422040992,\"created_user_id\":\"11e95f8ec3"
            "9de8fbdb0a4f1a\",\"modified_user_id\":\"11e95f8ec39de8fbdb0a4f1a\""
            "}],\"links\":{\"type\":\"Links\",\"first\":\"/v1/endpoint?page[siz"
            "e]=10&page[number]=1\",\"previous\":\"/v1/endpoint?page[size]=10&p"
            "age[number]=5\",\"next\":\"/v1/endpoint?page[size]=10&page[number]"
            "=7\",\"last\":\"/v1/endpoint?page[size]=10&page[number]=42\"},\"pa"
            "gination\":{\"type\":\"Pagination\",\"total_count\":423,\"page_cou"
            "nt\":42,\"page_number\":6,\"page_size\":10},\"sort\":{\"type\":\"S"
            "orting\",\"fields\":[{\"field\":\"last_name\",\"order\":\"asc\"}]}"
            "}",
        )
        received_body = APIHelper.json_deserialize(
            self.response_catcher.response.text,
        )
        assert ComparisonHelper.match_body(
            expected_body,
            received_body,
        )

    def test_delete_paylink(self):
        """
        Delete Paylink.
        """
        # Parameters for the API call
        paylink_id = "11e95f8ec39de8fbdb0a4f1a"

        # Perform the API call through the SDK function
        result = self.controller.delete_paylink(
            paylink_id,
        )
        # Test response code
        assert self.response_catcher.response.status_code == 204
        # Test headers
        expected_headers = {
            "content-type": "application/json",
        }

        assert ComparisonHelper.match_headers(
            expected_headers,
            self.response_catcher.response.headers,
        )
        # Test whether the captured response is as we expected
        assert result is not None
        expected_body = APIHelper.json_deserialize(
            "{\"type\":\"Paylink\",\"data\":{\"location_id\":\"11e95f8ec39de8fb"
            "db0a4f1a\",\"cc_product_transaction_id\":\"11e95f8ec39de8fbdb0a4f1"
            "a\",\"email\":\"email@domain.com\",\"amount_due\":1,\"contact_id\""
            ":\"11e95f8ec39de8fbdb0a4f1a\",\"ach_product_transaction_id\":\"11e"
            "95f8ec39de8fbdb0a4f1a\",\"expire_date\":\"2021-12-01\",\"display_p"
            "roduct_transaction_receipt_details\":true,\"display_billing_fields"
            "\":true,\"delivery_method\":0,\"cell_phone\":\"3339998822\",\"desc"
            "ription\":\"Description\",\"store_token\":false,\"store_token_titl"
            "e\":\"John Account\",\"bank_funded_only_override\":false,\"tags\":"
            "[\"Tag 1\"],\"id\":\"11e95f8ec39de8fbdb0a4f1a\",\"status_id\":true"
            ",\"status_code\":1,\"active\":true,\"created_ts\":1422040992,\"mod"
            "ified_ts\":1422040992,\"created_user_id\":\"11e95f8ec39de8fbdb0a4f"
            "1a\",\"modified_user_id\":\"11e95f8ec39de8fbdb0a4f1a\"}}",
        )
        received_body = APIHelper.json_deserialize(
            self.response_catcher.response.text,
        )
        assert ComparisonHelper.match_body(
            expected_body,
            received_body,
        )

    def test_view_single_paylink(self):
        """
        View Single Paylink.
        """
        # Parameters for the API call
        paylink_id = "11e95f8ec39de8fbdb0a4f1a"
        expand = None
        fields = None

        # Perform the API call through the SDK function
        result = self.controller.view_single_paylink(
            paylink_id,
            expand,
            fields,
        )
        # Test response code
        assert self.response_catcher.response.status_code == 200
        # Test headers
        expected_headers = {
            "content-type": "application/json",
        }

        assert ComparisonHelper.match_headers(
            expected_headers,
            self.response_catcher.response.headers,
        )
        # Test whether the captured response is as we expected
        assert result is not None
        expected_body = APIHelper.json_deserialize(
            "{\"type\":\"Paylink\",\"data\":{\"location_id\":\"11e95f8ec39de8fb"
            "db0a4f1a\",\"cc_product_transaction_id\":\"11e95f8ec39de8fbdb0a4f1"
            "a\",\"email\":\"email@domain.com\",\"amount_due\":1,\"contact_id\""
            ":\"11e95f8ec39de8fbdb0a4f1a\",\"ach_product_transaction_id\":\"11e"
            "95f8ec39de8fbdb0a4f1a\",\"expire_date\":\"2021-12-01\",\"display_p"
            "roduct_transaction_receipt_details\":true,\"display_billing_fields"
            "\":true,\"delivery_method\":0,\"cell_phone\":\"3339998822\",\"desc"
            "ription\":\"Description\",\"store_token\":false,\"store_token_titl"
            "e\":\"John Account\",\"bank_funded_only_override\":false,\"tags\":"
            "[\"Tag 1\"],\"id\":\"11e95f8ec39de8fbdb0a4f1a\",\"status_id\":true"
            ",\"status_code\":1,\"active\":true,\"created_ts\":1422040992,\"mod"
            "ified_ts\":1422040992,\"created_user_id\":\"11e95f8ec39de8fbdb0a4f"
            "1a\",\"modified_user_id\":\"11e95f8ec39de8fbdb0a4f1a\"}}",
        )
        received_body = APIHelper.json_deserialize(
            self.response_catcher.response.text,
        )
        assert ComparisonHelper.match_body(
            expected_body,
            received_body,
        )

    def test_resend_paylink(self):
        """
        Resend Paylink.
        """
        # Parameters for the API call
        paylink_id = "11e95f8ec39de8fbdb0a4f1a"
        expand = None
        email = None
        sms = None

        # Perform the API call through the SDK function
        result = self.controller.resend_paylink(
            paylink_id,
            expand,
            email,
            sms,
        )
        # Test response code
        assert self.response_catcher.response.status_code == 200
        # Test headers
        expected_headers = {
            "content-type": "application/json",
        }

        assert ComparisonHelper.match_headers(
            expected_headers,
            self.response_catcher.response.headers,
        )
        # Test whether the captured response is as we expected
        assert result is not None
        expected_body = APIHelper.json_deserialize(
            "{\"type\":\"Paylink\",\"data\":{\"location_id\":\"11e95f8ec39de8fb"
            "db0a4f1a\",\"cc_product_transaction_id\":\"11e95f8ec39de8fbdb0a4f1"
            "a\",\"email\":\"email@domain.com\",\"amount_due\":1,\"contact_id\""
            ":\"11e95f8ec39de8fbdb0a4f1a\",\"ach_product_transaction_id\":\"11e"
            "95f8ec39de8fbdb0a4f1a\",\"expire_date\":\"2021-12-01\",\"display_p"
            "roduct_transaction_receipt_details\":true,\"display_billing_fields"
            "\":true,\"delivery_method\":0,\"cell_phone\":\"3339998822\",\"desc"
            "ription\":\"Description\",\"store_token\":false,\"store_token_titl"
            "e\":\"John Account\",\"bank_funded_only_override\":false,\"tags\":"
            "[\"Tag 1\"],\"id\":\"11e95f8ec39de8fbdb0a4f1a\",\"status_id\":true"
            ",\"status_code\":1,\"active\":true,\"created_ts\":1422040992,\"mod"
            "ified_ts\":1422040992,\"created_user_id\":\"11e95f8ec39de8fbdb0a4f"
            "1a\",\"modified_user_id\":\"11e95f8ec39de8fbdb0a4f1a\"}}",
        )
        received_body = APIHelper.json_deserialize(
            self.response_catcher.response.text,
        )
        assert ComparisonHelper.match_body(
            expected_body,
            received_body,
        )

