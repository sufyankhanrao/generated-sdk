
"""
reportingapi

This file was automatically generated by APIMATIC v3.0 (
 https://www.apimatic.io ).
"""

# ruff: noqa: PLR0915, W291
from apimatic_core.utilities.comparison_helper import (
    ComparisonHelper,
)

from reportingapi.api_helper import APIHelper
from reportingapi.models.deposit_account_number_request import (
    DepositAccountNumberRequest,
)
from reportingapi.models.deposit_settlement_summary_request import (
    DepositSettlementSummaryRequest,
)
from reportingapi.models.deposit_summary_division_request import (
    DepositSummaryDivisionRequest,
)
from reportingapi.models.deposit_summary_merchant_request import (
    DepositSummaryMerchantRequest,
)
from reportingapi.models.deposit_summary_request import (
    DepositSummaryRequest,
)
from reportingapi.models.deposit_summary_store_request import (
    DepositSummaryStoreRequest,
)
from reportingapi.models.summary_request import (
    SummaryRequest,
)
from tests.controllers.controller_test_base import (
    ControllerTestBase,
)


class DepositSummaryControllerTests(ControllerTestBase):
    """
    Endpoint tests for validating the API behavior.

    Ensures controller methods execute correctly and produce the expected
    responses using the shared test client and response catcher.
    """

    controller = None

    @classmethod
    def setUpClass(cls):
        """
        Initialize the shared test client and controller for all test methods.
        """
        super().setUpClass()
        cls.controller = cls.client.deposit_summary
        cls.response_catcher = cls.controller.http_call_back

    def test_summary(self):
        """
        Resource to get total summary of deposits for given hierarchy and date range.
        Refer to the  schema object for the allowed hierarchies and specifications.
        """
        # Parameters for the API call
        body = APIHelper.json_deserialize(
            "{\"hierarchy\":{\"level\":\"MERCHANT\",\"values\":[\"4445000123456"
            "\",\"4345023507756\"]},\"dateRange\":{\"fromDate\":\"2019-07-27\","
            "\"toDate\":\"2019-09-12\"}}",
            SummaryRequest.from_dictionary,
        )
        v_correlation_id = "a0efdf0f-eb0b-4353-80bb-ec520e02885e"

        # Perform the API call through the SDK function
        result = self.controller.summary(
            body,
            v_correlation_id,
        )
        # Test response code
        assert self.response_catcher.response.status_code == 200
        # Test headers
        expected_headers = {
            "v-correlation-id": "None",
            "content-type": "application/json",
        }

        assert ComparisonHelper.match_headers(
            expected_headers,
            self.response_catcher.response.headers,
        )
        # Test whether the captured response is as we expected
        assert result is not None
        expected_body = APIHelper.json_deserialize(
            "{\"totalCreditsCount\":7346,\"totalCreditedAmount\":2353785.11,\"t"
            "otalDebitsCount\":3574,\"totalDebitedAmount\":84464.28,\"totalNetA"
            "mount\":2269320.83}",
        )
        received_body = APIHelper.json_deserialize(
            self.response_catcher.response.text,
        )
        assert ComparisonHelper.match_body(
            expected_body,
            received_body,
        )

    def test_summary_by_date(self):
        """
        Resource to get summary of deposits grouped by dates for given hierarchy and
        date range. Refer to the schema object for the allowed hierarchies and
        specifications.
        """
        # Parameters for the API call
        body = APIHelper.json_deserialize(
            "{\"hierarchy\":{\"level\":\"MERCHANT\",\"values\":[\"4445000123456"
            "\",\"4345023507756\"]},\"pagination\":{\"pageNumber\":1,\"pageSize"
            "\":25},\"dateRange\":{\"fromDate\":\"2019-07-27\",\"toDate\":\"201"
            "9-09-12\"}}",
            DepositSummaryRequest.from_dictionary,
        )
        v_correlation_id = "a0efdf0f-eb0b-4353-80bb-ec520e02885e"

        # Perform the API call through the SDK function
        result = self.controller.summary_by_date(
            body,
            v_correlation_id,
        )
        # Test response code
        assert self.response_catcher.response.status_code == 200
        # Test headers
        expected_headers = {
            "v-correlation-id": "None",
            "content-type": "application/json",
        }

        assert ComparisonHelper.match_headers(
            expected_headers,
            self.response_catcher.response.headers,
        )
        # Test whether the captured response is as we expected
        assert result is not None
        expected_body = APIHelper.json_deserialize(
            "{\"pagination\":{\"pageNumber\":1,\"pageSize\":25,\"totalRowCount"
            "\":85,\"totalReturnedCount\":25},\"totalCreditsCount\":25,\"totalC"
            "reditedAmount\":257.35,\"totalDebitsCount\":20,\"totalDebitedAmoun"
            "t\":36.43,\"totalNetAmount\":220.92,\"summaries\":[{\"creditsCount"
            "\":10,\"creditedAmount\":120.34,\"debitsCount\":9,\"debitedAmount"
            "\":20.56,\"netAmount\":99.78,\"date\":\"2019-07-27\"},{\"creditsCo"
            "unt\":15,\"creditedAmount\":137.01,\"debitsCount\":11,\"debitedAmo"
            "unt\":15.87,\"netAmount\":121.14,\"date\":\"2019-07-28\"}]}",
        )
        received_body = APIHelper.json_deserialize(
            self.response_catcher.response.text,
        )
        assert ComparisonHelper.match_body(
            expected_body,
            received_body,
        )

    def test_summary_by_settlement_type(self):
        """
        Resource to get summary of deposits grouped by settlement types for given
        hierarchy and date range with settlement type being an optional parameters.
        Refer to the schema object for the allowed hierarchies and specifications.
        """
        # Parameters for the API call
        body = APIHelper.json_deserialize(
            "{\"hierarchy\":{\"level\":\"MERCHANT\",\"values\":[\"4445000123456"
            "\",\"4345023507756\"]},\"pagination\":{\"pageNumber\":1,\"pageSize"
            "\":25},\"dateRange\":{\"fromDate\":\"2019-07-27\",\"toDate\":\"201"
            "9-09-12\"}}",
            DepositSettlementSummaryRequest.from_dictionary,
        )
        v_correlation_id = "a0efdf0f-eb0b-4353-80bb-ec520e02885e"

        # Perform the API call through the SDK function
        result = self.controller.summary_by_settlement_type(
            body,
            v_correlation_id,
        )
        # Test response code
        assert self.response_catcher.response.status_code == 200
        # Test headers
        expected_headers = {
            "v-correlation-id": "None",
            "content-type": "application/json",
        }

        assert ComparisonHelper.match_headers(
            expected_headers,
            self.response_catcher.response.headers,
        )
        # Test whether the captured response is as we expected
        assert result is not None
        expected_body = APIHelper.json_deserialize(
            "{\"pagination\":{\"pageNumber\":1,\"pageSize\":25,\"totalRowCount"
            "\":85,\"totalReturnedCount\":25},\"totalCreditsCount\":25,\"totalC"
            "reditedAmount\":257.35,\"totalDebitsCount\":20,\"totalDebitedAmoun"
            "t\":36.43,\"totalNetAmount\":220.92,\"summaries\":[{\"creditsCount"
            "\":10,\"creditedAmount\":120.34,\"debitsCount\":9,\"debitedAmount"
            "\":20.56,\"netAmount\":99.78,\"code\":\"F\",\"description\":\"FEES"
            "\"},{\"creditsCount\":15,\"creditedAmount\":137.01,\"debitsCount\""
            ":11,\"debitedAmount\":15.87,\"netAmount\":121.14,\"code\":\"D\",\""
            "description\":\"DEPOSIT\"}]}",
        )
        received_body = APIHelper.json_deserialize(
            self.response_catcher.response.text,
        )
        assert ComparisonHelper.match_body(
            expected_body,
            received_body,
        )

    def test_summary_by_account_number(self):
        """
        Resource to get summary of deposits grouped by account number for given
        hierarchy and date range with account number being an optional parameters.
        Refer to the schema object for the allowed hierarchies and specifications.
        """
        # Parameters for the API call
        body = APIHelper.json_deserialize(
            "{\"hierarchy\":{\"level\":\"CHAIN\",\"values\":[\"AB1234\"]},\"dat"
            "eRange\":{\"fromDate\":\"2021-02-18\",\"toDate\":\"2021-02-18\"}}",
            DepositAccountNumberRequest.from_dictionary,
        )
        v_correlation_id = "a0efdf0f-eb0b-4353-80bb-ec520e02885e"

        # Perform the API call through the SDK function
        result = self.controller.summary_by_account_number(
            body,
            v_correlation_id,
        )
        # Test response code
        assert self.response_catcher.response.status_code == 200
        # Test headers
        expected_headers = {
            "v-correlation-id": "None",
            "content-type": "application/json",
        }

        assert ComparisonHelper.match_headers(
            expected_headers,
            self.response_catcher.response.headers,
        )
        # Test whether the captured response is as we expected
        assert result is not None
        expected_body = APIHelper.json_deserialize(
            "{\"pagination\":{\"pageNumber\":1,\"pageSize\":25,\"totalRowCount"
            "\":1,\"totalReturnedCount\":1},\"totalCreditsCount\":22,\"totalCre"
            "ditedAmount\":5524735.1,\"totalDebitsCount\":0,\"totalDebitedAmoun"
            "t\":0,\"totalNetAmount\":5524735.1,\"summaries\":[{\"creditsCount"
            "\":12,\"creditedAmount\":5524734.1,\"debitsCount\":0,\"debitedAmou"
            "nt\":0,\"netAmount\":5524734.1,\"accountNumber\":\"******1811\",\""
            "accountType\":\"ACH\"},{\"creditsCount\":10,\"creditedAmount\":1.0"
            ",\"debitsCount\":0,\"debitedAmount\":0,\"netAmount\":1.0,\"account"
            "Number\":\"******2001\",\"accountType\":\"ACH\"}]}",
        )
        received_body = APIHelper.json_deserialize(
            self.response_catcher.response.text,
        )
        assert ComparisonHelper.match_body(
            expected_body,
            received_body,
        )

    def test_summary_by_merchant(self):
        """
        Resource to get summary of deposits grouped by merchants for given hierarchy
        and date range. Refer to the schema object for the allowed hierarchies and
        specifications.
        """
        # Parameters for the API call
        body = APIHelper.json_deserialize(
            "{\"hierarchy\":{\"level\":\"MERCHANT\",\"values\":[\"4445000123456"
            "\",\"4345023507756\"]},\"pagination\":{\"pageNumber\":1,\"pageSize"
            "\":25},\"dateRange\":{\"fromDate\":\"2019-07-27\",\"toDate\":\"201"
            "9-09-12\"}}",
            DepositSummaryMerchantRequest.from_dictionary,
        )
        v_correlation_id = "a0efdf0f-eb0b-4353-80bb-ec520e02885e"

        # Perform the API call through the SDK function
        result = self.controller.summary_by_merchant(
            body,
            v_correlation_id,
        )
        # Test response code
        assert self.response_catcher.response.status_code == 200
        # Test headers
        expected_headers = {
            "v-correlation-id": "None",
            "content-type": "application/json",
        }

        assert ComparisonHelper.match_headers(
            expected_headers,
            self.response_catcher.response.headers,
        )
        # Test whether the captured response is as we expected
        assert result is not None
        expected_body = APIHelper.json_deserialize(
            "{\"pagination\":{\"pageNumber\":1,\"pageSize\":25,\"totalRowCount"
            "\":85,\"totalReturnedCount\":25},\"totalCreditsCount\":25,\"totalC"
            "reditedAmount\":257.35,\"totalDebitsCount\":20,\"totalDebitedAmoun"
            "t\":36.43,\"totalNetAmount\":220.92,\"summaries\":[{\"creditsCount"
            "\":10,\"creditedAmount\":120.34,\"debitsCount\":9,\"debitedAmount"
            "\":20.56,\"netAmount\":99.78,\"merchantId\":\"4445000123456\"},{\""
            "creditsCount\":15,\"creditedAmount\":137.01,\"debitsCount\":11,\"d"
            "ebitedAmount\":15.87,\"netAmount\":121.14,\"merchantId\":\"4345023"
            "507756\"}]}",
        )
        received_body = APIHelper.json_deserialize(
            self.response_catcher.response.text,
        )
        assert ComparisonHelper.match_body(
            expected_body,
            received_body,
        )

    def test_summary_by_store(self):
        """
        Resource to get summary of deposits grouped by stores for given hierarchy and
        date range. Refer to the schema object for the allowed hierarchies and
        specifications.
        """
        # Parameters for the API call
        body = APIHelper.json_deserialize(
            "{\"hierarchy\":{\"level\":\"CHAIN\",\"values\":[\"AB1234\",\"11121"
            "7\"]},\"pagination\":{\"pageNumber\":1,\"pageSize\":25},\"dateRang"
            "e\":{\"fromDate\":\"2019-07-27\",\"toDate\":\"2019-09-12\"}}",
            DepositSummaryStoreRequest.from_dictionary,
        )
        v_correlation_id = "a0efdf0f-eb0b-4353-80bb-ec520e02885e"

        # Perform the API call through the SDK function
        result = self.controller.summary_by_store(
            body,
            v_correlation_id,
        )
        # Test response code
        assert self.response_catcher.response.status_code == 200
        # Test headers
        expected_headers = {
            "v-correlation-id": "None",
            "content-type": "application/json",
        }

        assert ComparisonHelper.match_headers(
            expected_headers,
            self.response_catcher.response.headers,
        )
        # Test whether the captured response is as we expected
        assert result is not None
        expected_body = APIHelper.json_deserialize(
            "{\"pagination\":{\"pageNumber\":1,\"pageSize\":25,\"totalRowCount"
            "\":85,\"totalReturnedCount\":25},\"totalCreditsCount\":25,\"totalC"
            "reditedAmount\":257.35,\"totalDebitsCount\":20,\"totalDebitedAmoun"
            "t\":36.43,\"totalNetAmount\":220.92,\"summaries\":[{\"creditsCount"
            "\":10,\"creditedAmount\":120.34,\"debitsCount\":9,\"debitedAmount"
            "\":20.56,\"netAmount\":99.78,\"chainCode\":\"AB1234\",\"storeNumbe"
            "r\":\"000000012\"},{\"creditsCount\":15,\"creditedAmount\":137.01,"
            "\"debitsCount\":11,\"debitedAmount\":15.87,\"netAmount\":121.14,\""
            "chainCode\":\"AB1234\",\"storeNumber\":\"000000023\"}]}",
        )
        received_body = APIHelper.json_deserialize(
            self.response_catcher.response.text,
        )
        assert ComparisonHelper.match_body(
            expected_body,
            received_body,
        )

    def test_summary_by_division(self):
        """
        Resource to get summary of deposits grouped by divisions for given hierarchy
        and date range. Refer to the schema object for the allowed hierarchies and
        specifications.
        """
        # Parameters for the API call
        body = APIHelper.json_deserialize(
            "{\"hierarchy\":{\"level\":\"CHAIN\",\"values\":[\"AB1234\",\"11121"
            "7\"]},\"pagination\":{\"pageNumber\":1,\"pageSize\":25},\"dateRang"
            "e\":{\"fromDate\":\"2019-07-27\",\"toDate\":\"2019-09-12\"}}",
            DepositSummaryDivisionRequest.from_dictionary,
        )
        v_correlation_id = "a0efdf0f-eb0b-4353-80bb-ec520e02885e"

        # Perform the API call through the SDK function
        result = self.controller.summary_by_division(
            body,
            v_correlation_id,
        )
        # Test response code
        assert self.response_catcher.response.status_code == 200
        # Test headers
        expected_headers = {
            "v-correlation-id": "None",
            "content-type": "application/json",
        }

        assert ComparisonHelper.match_headers(
            expected_headers,
            self.response_catcher.response.headers,
        )
        # Test whether the captured response is as we expected
        assert result is not None
        expected_body = APIHelper.json_deserialize(
            "{\"pagination\":{\"pageNumber\":1,\"pageSize\":25,\"totalRowCount"
            "\":85,\"totalReturnedCount\":25},\"totalCreditsCount\":25,\"totalC"
            "reditedAmount\":257.35,\"totalDebitsCount\":20,\"totalDebitedAmoun"
            "t\":36.43,\"totalNetAmount\":220.92,\"summaries\":[{\"creditsCount"
            "\":10,\"creditedAmount\":120.34,\"debitsCount\":9,\"debitedAmount"
            "\":20.56,\"netAmount\":99.78,\"chainCode\":\"AB1234\",\"divisionNu"
            "mber\":\"356\"},{\"creditsCount\":15,\"creditedAmount\":137.01,\"d"
            "ebitsCount\":11,\"debitedAmount\":15.87,\"netAmount\":121.14,\"cha"
            "inCode\":\"AB1234\",\"divisionNumber\":\"453\"}]}",
        )
        received_body = APIHelper.json_deserialize(
            self.response_catcher.response.text,
        )
        assert ComparisonHelper.match_body(
            expected_body,
            received_body,
        )

