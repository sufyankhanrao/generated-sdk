# -*- coding: utf-8 -*-

"""
reportingapi

This file was automatically generated by APIMATIC v3.0 (
 https://www.apimatic.io ).
"""

import json

from tests.controllers.controller_test_base import ControllerTestBase
from apimatic_core.utilities.comparison_helper import ComparisonHelper
from reportingapi.api_helper import APIHelper
from reportingapi.models.settlements_request import SettlementsRequest
from reportingapi.models.settlements_summary_request import SettlementsSummaryRequest
from reportingapi.models.settlements_request_by_merchant import SettlementsRequestByMERCHANT
from reportingapi.models.settlements_request_by_store import SettlementsRequestBySTORE
from reportingapi.models.settlements_request_by_chain import SettlementsRequestByCHAIN
from reportingapi.models.settlements_request_by_super_chain import SettlementsRequestBySuperChain
from reportingapi.models.monthly_tran_summary_input_chain import MonthlyTranSummaryInputCHAIN


class SettlementsControllerTests(ControllerTestBase):

    controller = None

    @classmethod
    def setUpClass(cls):
        super(SettlementsControllerTests, cls).setUpClass()
        cls.controller = cls.client.settlements
        cls.response_catcher = cls.controller.http_call_back

    # Endpoint is used to retrieve the details for a individual transaction.
    def test_retrieve_transaction_details_by_credit_transaction_id(self):
        # Parameters for the API call
        transaction_id = '141710009519'
        v_correlation_id = 'a0efdf0f-eb0b-4353-80bb-ec520e02885e'

        # Perform the API call through the SDK function
        result = self.controller.retrieve_transaction_details_by_credit_transaction_id(transaction_id, v_correlation_id)

        # Test response code
        assert self.response_catcher.response.status_code == 200

        # Test headers
        expected_headers = {}
        expected_headers['content-type'] = 'application/json'

        assert ComparisonHelper.match_headers(expected_headers, self.response_catcher.response.headers)


    # Endpoint is used to retrieve the details for an individual transaction.
    def test_retrieve_transaction_details_by_debit_transaction_id(self):
        # Parameters for the API call
        transaction_id = '141710009519'
        v_correlation_id = 'a0efdf0f-eb0b-4353-80bb-ec520e02885e'

        # Perform the API call through the SDK function
        result = self.controller.retrieve_transaction_details_by_debit_transaction_id(transaction_id, v_correlation_id)

        # Test response code
        assert self.response_catcher.response.status_code == 200

        # Test headers
        expected_headers = {}
        expected_headers['content-type'] = 'application/json'

        assert ComparisonHelper.match_headers(expected_headers, self.response_catcher.response.headers)


    # Endpoint is used to retrieve the details for an individual transaction.
    def test_retrieve_transaction_details_by_gift_transaction_id(self):
        # Parameters for the API call
        transaction_id = '141710009519'
        v_correlation_id = 'a0efdf0f-eb0b-4353-80bb-ec520e02885e'

        # Perform the API call through the SDK function
        result = self.controller.retrieve_transaction_details_by_gift_transaction_id(transaction_id, v_correlation_id)

        # Test response code
        assert self.response_catcher.response.status_code == 200

        # Test headers
        expected_headers = {}
        expected_headers['content-type'] = 'application/json'

        assert ComparisonHelper.match_headers(expected_headers, self.response_catcher.response.headers)


    # Resource to get total summary of settlements for given hierarchy and date range with card type and card network being optional parameters. Refer to the  schema object for the allowed hierarchies and specifications.
    def test_getsettlementssummary(self):
        # Parameters for the API call
        v_correlation_id = 'a0efdf0f-eb0b-4353-80bb-ec520e02885e'
        body = APIHelper.json_deserialize('{"hierarchy":{"level":"MERCHANT","values":["4445000123456","434502'
            '3507756"]},"dateRange":{"fromDate":"2019-07-27","toDate":"2019-09-'
            '13"}}', SettlementsRequest.from_dictionary)

        # Perform the API call through the SDK function
        result = self.controller.getsettlementssummary(v_correlation_id, body)

        # Test response code
        assert self.response_catcher.response.status_code == 200

        # Test headers
        expected_headers = {}
        expected_headers['v-correlation-id'] = None
        expected_headers['content-type'] = 'application/json'

        assert ComparisonHelper.match_headers(expected_headers, self.response_catcher.response.headers)

        
        # Test whether the captured response is as we expected
        assert result is not None
        expected_body = APIHelper.json_deserialize('{"totalSaleCount":200,"totalSaleAmount":2000.11,"totalReturnCount"'
            ':218,"totalReturnAmount":844.28,"totalNetAmount":1155.72}')
        received_body = APIHelper.json_deserialize(self.response_catcher.response.text)
        assert ComparisonHelper.match_body(expected_body, received_body)

    # Resource to get summary of settlements grouped by card network for given hierarchy and date range with card type and card network being optional parameters. Refer to the schema object for the allowed hierarchies and specifications.
    def test_getsettlementssummarybycardnetwork(self):
        # Parameters for the API call
        v_correlation_id = 'a0efdf0f-eb0b-4353-80bb-ec520e02885e'
        body = APIHelper.json_deserialize('{"hierarchy":{"level":"MERCHANT","values":["4445000123456","434502'
            '3507756"]},"pagination":{"pageNumber":1,"pageSize":25},"dateRange"'
            ':{"fromDate":"2019-07-27","toDate":"2019-09-13"}}', SettlementsSummaryRequest.from_dictionary)

        # Perform the API call through the SDK function
        result = self.controller.getsettlementssummarybycardnetwork(v_correlation_id, body)

        # Test response code
        assert self.response_catcher.response.status_code == 200

        # Test headers
        expected_headers = {}
        expected_headers['v-correlation-id'] = None
        expected_headers['content-type'] = 'application/json'

        assert ComparisonHelper.match_headers(expected_headers, self.response_catcher.response.headers)

        
        # Test whether the captured response is as we expected
        assert result is not None
        expected_body = APIHelper.json_deserialize('{"pagination":{"pageNumber":1,"pageSize":25,"totalRowCount":85,"to'
            'talReturnedCount":25},"totalSaleCount":25,"totalSaleAmount":257.35'
            ',"totalReturnCount":20,"totalReturnAmount":36.43,"totalNetAmount":'
            '236.79,"summaries":[{"saleCount":10,"saleAmount":120.34,"returnCou'
            'nt":9,"returnAmount":20.56,"netAmount":99.78,"cardType":"CREDIT","'
            'cardNetwork":{"code":"L,","shortDescription":"BILL_ME_LATER","long'
            'Description":"BILL_ME_LATER"}},{"saleCount":15,"saleAmount":137.01'
            ',"returnCount":11,"returnAmount":15.87,"netAmount":137.01,"cardTyp'
            'e":"DEBIT","cardNetwork":{"code":"07","shortDescription":"EBT","lo'
            'ngDescription":"EBT"}}]}')
        received_body = APIHelper.json_deserialize(self.response_catcher.response.text)
        assert ComparisonHelper.match_body(expected_body, received_body)

    # Resource to get summary of settlements grouped by card type for given hierarchy and date range with card type and card network being optional parameters. Refer to the schema object for the allowed hierarchies and specifications.
    def test_getsettlementssummarybycardtype(self):
        # Parameters for the API call
        v_correlation_id = 'a0efdf0f-eb0b-4353-80bb-ec520e02885e'
        body = APIHelper.json_deserialize('{"hierarchy":{"level":"MERCHANT","values":["4445000123456","434502'
            '3507756"]},"pagination":{"pageNumber":1,"pageSize":25},"dateRange"'
            ':{"fromDate":"2019-07-27","toDate":"2019-09-13"}}', SettlementsSummaryRequest.from_dictionary)

        # Perform the API call through the SDK function
        result = self.controller.getsettlementssummarybycardtype(v_correlation_id, body)

        # Test response code
        assert self.response_catcher.response.status_code == 200

        # Test headers
        expected_headers = {}
        expected_headers['v-correlation-id'] = None
        expected_headers['content-type'] = 'application/json'

        assert ComparisonHelper.match_headers(expected_headers, self.response_catcher.response.headers)

        
        # Test whether the captured response is as we expected
        assert result is not None
        expected_body = APIHelper.json_deserialize('{"pagination":{"pageNumber":1,"pageSize":25,"totalRowCount":85,"to'
            'talReturnedCount":25},"totalSaleCount":25,"totalSaleAmount":257.35'
            ',"totalReturnCount":20,"totalReturnAmount":36.43,"totalNetAmount":'
            '236.79,"summaries":[{"saleCount":10,"saleAmount":120.34,"returnCou'
            'nt":9,"returnAmount":20.56,"netAmount":99.78,"cardType":"CREDIT"},'
            '{"saleCount":15,"saleAmount":137.01,"returnCount":11,"returnAmount'
            '":15.87,"netAmount":137.01,"cardType":"DEBIT"}]}')
        received_body = APIHelper.json_deserialize(self.response_catcher.response.text)
        assert ComparisonHelper.match_body(expected_body, received_body)

    # Resource to get summary of settlements grouped by process dates for given hierarchy and date range with card type and card network being optional parameters. Refer to the schema object for the allowed hierarchies and specifications.
    def test_getsettlementssummarybyprocessdate(self):
        # Parameters for the API call
        v_correlation_id = 'a0efdf0f-eb0b-4353-80bb-ec520e02885e'
        body = APIHelper.json_deserialize('{"hierarchy":{"level":"MERCHANT","values":["4445000123456","434502'
            '3507756"]},"pagination":{"pageNumber":1,"pageSize":25},"dateRange"'
            ':{"fromDate":"2019-07-27","toDate":"2019-09-13"}}', SettlementsSummaryRequest.from_dictionary)

        # Perform the API call through the SDK function
        result = self.controller.getsettlementssummarybyprocessdate(v_correlation_id, body)

        # Test response code
        assert self.response_catcher.response.status_code == 200

        # Test headers
        expected_headers = {}
        expected_headers['v-correlation-id'] = None
        expected_headers['content-type'] = 'application/json'

        assert ComparisonHelper.match_headers(expected_headers, self.response_catcher.response.headers)

        
        # Test whether the captured response is as we expected
        assert result is not None
        expected_body = APIHelper.json_deserialize('{"pagination":{"pageNumber":1,"pageSize":25,"totalRowCount":85,"to'
            'talReturnedCount":25},"totalSaleCount":25,"totalSaleAmount":257.35'
            ',"totalReturnCount":20,"totalReturnAmount":36.43,"totalNetAmount":'
            '236.79,"summaries":[{"saleCount":10,"saleAmount":120.34,"returnCou'
            'nt":9,"returnAmount":20.56,"netAmount":99.78,"processDate":"2019-0'
            '7-27"},{"saleCount":15,"saleAmount":137.01,"returnCount":11,"retur'
            'nAmount":15.87,"netAmount":137.01,"processDate":"2019-07-28"}]}')
        received_body = APIHelper.json_deserialize(self.response_catcher.response.text)
        assert ComparisonHelper.match_body(expected_body, received_body)

    # Resource to get summary of settlements grouped by merchants for given hierarchy and date range with card type and card network being optional parameters. Refer to the schema object for the allowed hierarchies and specifications.
    def test_getsettlementssummarybymerchant(self):
        # Parameters for the API call
        v_correlation_id = 'a0efdf0f-eb0b-4353-80bb-ec520e02885e'
        body = APIHelper.json_deserialize('{"hierarchy":{"level":"MERCHANT","values":["4445000123456","434502'
            '3507756"]},"pagination":{"pageNumber":1,"pageSize":25},"dateRange"'
            ':{"fromDate":"2019-07-27","toDate":"2019-09-13"}}', SettlementsRequestByMERCHANT.from_dictionary)

        # Perform the API call through the SDK function
        result = self.controller.getsettlementssummarybymerchant(v_correlation_id, body)

        # Test response code
        assert self.response_catcher.response.status_code == 200

        # Test headers
        expected_headers = {}
        expected_headers['v-correlation-id'] = None
        expected_headers['content-type'] = 'application/json'

        assert ComparisonHelper.match_headers(expected_headers, self.response_catcher.response.headers)

        
        # Test whether the captured response is as we expected
        assert result is not None
        expected_body = APIHelper.json_deserialize('{"pagination":{"pageNumber":1,"pageSize":25,"totalRowCount":85,"to'
            'talReturnedCount":25},"totalSaleCount":25,"totalSaleAmount":257.35'
            ',"totalReturnCount":20,"totalReturnAmount":36.43,"totalNetAmount":'
            '236.79,"summaries":[{"saleCount":10,"saleAmount":120.34,"returnCou'
            'nt":9,"returnAmount":20.56,"netAmount":99.78,"merchantId":"4445000'
            '123456"},{"saleCount":15,"saleAmount":137.01,"returnCount":11,"ret'
            'urnAmount":15.87,"netAmount":137.01,"merchantId":"4345023507756"}]'
            '}')
        received_body = APIHelper.json_deserialize(self.response_catcher.response.text)
        assert ComparisonHelper.match_body(expected_body, received_body)

    # Resource to get summary of settlements grouped by stores for given hierarchy and date range with card type and card network being optional parameters. Refer to the schema object for the allowed hierarchies and specifications.
    def test_getsettlementssummarybystore(self):
        # Parameters for the API call
        v_correlation_id = 'a0efdf0f-eb0b-4353-80bb-ec520e02885e'
        body = APIHelper.json_deserialize('{"hierarchy":{"level":"CHAIN","values":["AB1234","111217"]},"pagin'
            'ation":{"pageNumber":1,"pageSize":25},"dateRange":{"fromDate":"201'
            '9-07-27","toDate":"2019-09-12"}}', SettlementsRequestBySTORE.from_dictionary)

        # Perform the API call through the SDK function
        result = self.controller.getsettlementssummarybystore(v_correlation_id, body)

        # Test response code
        assert self.response_catcher.response.status_code == 200

        # Test headers
        expected_headers = {}
        expected_headers['v-correlation-id'] = None
        expected_headers['content-type'] = 'application/json'

        assert ComparisonHelper.match_headers(expected_headers, self.response_catcher.response.headers)

        
        # Test whether the captured response is as we expected
        assert result is not None
        expected_body = APIHelper.json_deserialize('{"pagination":{"pageNumber":1,"pageSize":25,"totalRowCount":85,"to'
            'talReturnedCount":25},"totalSaleCount":25,"totalSaleAmount":257.35'
            ',"totalReturnCount":20,"totalReturnAmount":36.43,"totalNetAmount":'
            '236.79,"summaries":[{"saleCount":10,"saleAmount":120.34,"returnCou'
            'nt":9,"returnAmount":20.56,"netAmount":99.78,"chainCode":"AB1234",'
            '"storeNumber":"000000012"},{"saleCount":15,"saleAmount":137.01,"re'
            'turnCount":11,"returnAmount":15.87,"netAmount":137.01,"chainCode":'
            '"AB1234","storeNumber":"000000023"}]}')
        received_body = APIHelper.json_deserialize(self.response_catcher.response.text)
        assert ComparisonHelper.match_body(expected_body, received_body)

    # Resource to get summary of settlements grouped by chain for given hierarchy and date range with card type and card network being optional parameters. Refer to the schema object for the allowed hierarchies and specifications.
    def test_getsettlementssummarybychain(self):
        # Parameters for the API call
        v_correlation_id = 'a0efdf0f-eb0b-4353-80bb-ec520e02885e'
        body = None

        # Perform the API call through the SDK function
        result = self.controller.getsettlementssummarybychain(v_correlation_id, body)

        # Test response code
        assert self.response_catcher.response.status_code == 200

        # Test headers
        expected_headers = {}
        expected_headers['v-correlation-id'] = None
        expected_headers['content-type'] = 'application/json'

        assert ComparisonHelper.match_headers(expected_headers, self.response_catcher.response.headers)

        
        # Test whether the captured response is as we expected
        assert result is not None
        expected_body = APIHelper.json_deserialize('{"pagination":{"pageNumber":1,"pageSize":25,"totalRowCount":85,"to'
            'talReturnedCount":25},"totalSaleCount":25,"totalSaleAmount":257.35'
            ',"totalReturnCount":20,"totalReturnAmount":36.43,"totalNetAmount":'
            '236.79,"summaries":[{"saleCount":10,"saleAmount":120.34,"returnCou'
            'nt":9,"returnAmount":20.56,"netAmount":99.78,"chainCode":"AB1234"}'
            ',{"saleCount":15,"saleAmount":137.01,"returnCount":11,"returnAmoun'
            't":15.87,"netAmount":137.01,"chainCode":"111217"}]}')
        received_body = APIHelper.json_deserialize(self.response_catcher.response.text)
        assert ComparisonHelper.match_body(expected_body, received_body)

    # Resource to get summary of settlements grouped by super chain for given hierarchy and date range with card type and card network being optional parameters. Refer to the schema object for the allowed hierarchies and specifications.
    def test_get_settlements_summary_bysuperchain(self):
        # Parameters for the API call
        v_correlation_id = 'a0efdf0f-eb0b-4353-80bb-ec520e02885e'
        body = None

        # Perform the API call through the SDK function
        result = self.controller.get_settlements_summary_bysuperchain(v_correlation_id, body)

        # Test response code
        assert self.response_catcher.response.status_code == 200

        # Test headers
        expected_headers = {}
        expected_headers['v-correlation-id'] = None
        expected_headers['content-type'] = 'application/json'

        assert ComparisonHelper.match_headers(expected_headers, self.response_catcher.response.headers)

        
        # Test whether the captured response is as we expected
        assert result is not None
        expected_body = APIHelper.json_deserialize('{"pagination":{"pageNumber":1,"pageSize":25,"totalRowCount":85,"to'
            'talReturnedCount":25},"totalSaleCount":25,"totalSaleAmount":257.35'
            ',"totalReturnCount":20,"totalReturnAmount":36.43,"totalNetAmount":'
            '236.79,"summaries":[{"saleCount":10,"saleAmount":120.34,"returnCou'
            'nt":9,"returnAmount":20.56,"netAmount":99.78,"superChainCode":"SCN'
            'PCB6111"},{"saleCount":15,"saleAmount":137.01,"returnCount":11,"re'
            'turnAmount":15.87,"netAmount":137.01,"superChainCode":"SCNPCB8811"'
            '}]}')
        received_body = APIHelper.json_deserialize(self.response_catcher.response.text)
        assert ComparisonHelper.match_body(expected_body, received_body)

    # API to return settled transaction summary details by month for a single chain.
    def test_getsettlementssummarybymonth(self):
        # Parameters for the API call
        v_correlation_id = 'a0efdf0f-eb0b-4353-80bb-ec520e02885e'
        body = APIHelper.json_deserialize('{"chainCode":"111186","dateRange":{"startMonth":"2023-03","endMont'
            'h":"2023-06"}}', MonthlyTranSummaryInputCHAIN.from_dictionary)

        # Perform the API call through the SDK function
        result = self.controller.getsettlementssummarybymonth(v_correlation_id, body)

        # Test response code
        assert self.response_catcher.response.status_code == 200

        # Test headers
        expected_headers = {}
        expected_headers['v-correlation-id'] = None
        expected_headers['content-type'] = 'application/json'

        assert ComparisonHelper.match_headers(expected_headers, self.response_catcher.response.headers)

        
        # Test whether the captured response is as we expected
        assert result is not None
        expected_body = APIHelper.json_deserialize('{"details":{"chainCode":"111186","totalChargebackSalesCount":116,"'
            'totalChargebackSalesAmount":158624.05,"totalTransactionAmount":8.8'
            '7,"totalTransactionCount":7,"processMonthStart":"2023-03","process'
            'MonthEnd":"2023-06"}}')
        received_body = APIHelper.json_deserialize(self.response_catcher.response.text)
        assert ComparisonHelper.match_body(expected_body, received_body)

