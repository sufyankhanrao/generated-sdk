# -*- coding: utf-8 -*-

"""
reportingapi

This file was automatically generated by APIMATIC v3.0 (
 https://www.apimatic.io ).
"""

import json

from tests.controllers.controller_test_base import ControllerTestBase
from apimatic_core.utilities.comparison_helper import ComparisonHelper
from reportingapi.api_helper import APIHelper
from reportingapi.models.auth_transactions_request import AuthTransactionsRequest


class AuthorizationsControllerTests(ControllerTestBase):

    controller = None

    @classmethod
    def setUpClass(cls):
        super(AuthorizationsControllerTests, cls).setUpClass()
        cls.controller = cls.client.authorizations
        cls.response_catcher = cls.controller.http_call_back

    # Resource to get total summary of authorizations for given hierarchy and date range with card type and card network being optional parameters. Refer to the  schema object for the allowed hierarchies and specifications.
    def test_get_authorizations_summary(self):
        # Parameters for the API call
        body = APIHelper.json_deserialize('{"hierarchy":{"level":"MERCHANT","values":["4445000123456","434502'
            '3507756"]},"dateRange":{"fromDate":"2019-07-27","toDate":"2019-09-'
            '12"}}', AuthTransactionsRequest.from_dictionary)
        v_correlation_id = 'a0efdf0f-eb0b-4353-80bb-ec520e02885e'

        # Perform the API call through the SDK function
        result = self.controller.get_authorizations_summary(body, v_correlation_id)

        # Test response code
        assert self.response_catcher.response.status_code == 200

        # Test headers
        expected_headers = {}
        expected_headers['v-correlation-id'] = None
        expected_headers['content-type'] = 'application/json'

        assert ComparisonHelper.match_headers(expected_headers, self.response_catcher.response.headers)


